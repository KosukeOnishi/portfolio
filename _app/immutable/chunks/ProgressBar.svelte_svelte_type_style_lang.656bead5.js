import{w as f}from"./index.379d764b.js";import{aa as w}from"./index.bb6dd32c.js";function _(){const{subscribe:r,set:i,update:s}=f([]);return{subscribe:r,set:i,update:s,trigger:e=>s(t=>(t.push(e),t)),close:()=>s(e=>(e.length>0&&e.shift(),e)),clear:()=>i([])}}const P=_(),v={message:"Missing Toast Message",autohide:!0,timeout:5e3};function T(){const r=Math.random();return Number(r).toString(32)}function b(r){if(r.autohide===!0)return setTimeout(()=>{z.close(r.id)},r.timeout)}function p(){const{subscribe:r,set:i,update:s}=f([]);return{subscribe:r,trigger:e=>{const t=T();return s(a=>{e&&e.callback&&e.callback({id:t,status:"queued"}),e.hideDismiss&&(e.autohide=!0);const n={...v,...e,id:t};return n.timeoutId=b(n),a.push(n),a}),t},close:e=>s(t=>{if(t.length>0){const a=t.findIndex(c=>c.id===e),n=t[a];n&&(n.callback&&n.callback({id:e,status:"closed"}),n.timeoutId&&clearTimeout(n.timeoutId),t.splice(a,1))}return t}),freeze:e=>s(t=>(t.length>0&&clearTimeout(t[e].timeoutId),t)),unfreeze:e=>s(t=>(t.length>0&&(t[e].timeoutId=b(t[e])),t)),clear:()=>i([])}}const z=p(),d={};function I(r){return r==="local"?localStorage:sessionStorage}function g(r,i,s){const e=(s==null?void 0:s.serializer)??JSON,t=(s==null?void 0:s.storage)??"local";function a(n,c){I(t).setItem(n,e.stringify(c))}if(!d[r]){const n=f(i,u=>{const o=I(t).getItem(r);o&&u(e.parse(o));{const h=l=>{l.key===r&&u(l.newValue?e.parse(l.newValue):null)};return window.addEventListener("storage",h),()=>window.removeEventListener("storage",h)}}),{subscribe:c,set:m}=n;d[r]={set(u){a(r,u),m(u)},update(u){const o=u(w(n));a(r,o),m(o)},subscribe:c}}return d[r]}g("modeOsPrefers",!1);g("modeUserPrefers",void 0);g("modeCurrent",!1);export{P as m,z as t};
